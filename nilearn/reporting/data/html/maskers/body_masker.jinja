{% extends "html/body_base.jinja" %}

{% block report %}
    <div class="pure-g">
        <div class="pure-u-1 pure-u-md-2-3">
            {% if not has_plotting_engine %}

                {% include "html/partials/missing_plotting_engine.jinja" %}

            {% elif content %}
                <div class="image">
                    <img class="pure-img"
                         width="100%"
                         src="data:image/svg+xml;base64,{{ content }}"
                         alt="No image provided." />
                    {% if overlay %}
                        <div class="overlay">
                            <img class="pure-img"
                                 width="100%"
                                 src="data:image/svg+xml;base64,{{ overlay }}"
                                 alt="No overlay found." />
                        </div>
                    {% endif %}
                </div>
                {% if engine == "brainsprite" %}

                    {% include "html/maskers/partials/brainsprite.jinja" %}

                {% endif %}
            {% endif %}
        </div>
        <div class="pure-u-1 pure-u-md-1-3">
            <p>{{ description }}</p>
            {% if n_elements %}
                <p>
                    The mask includes {{ n_elements }} voxels ({{ coverage }} %) of the image.
                </p>
            {% endif %}
        </div>
    </div>

    {% include "html/maskers/partials/parameters.jinja" %}
    {% include "html/maskers/partials/info_transfom.jinja" %}

    {% if engine == "brainsprite" %}
        <script> {{ js_query_code }} </script>
        <script> {{ brainsprite_code }} </script>
        <script>
      // On load: build all figures
      $(window).on("load", function () {
        // Create brain slices
        var brain = brainsprite({{params}});
      });
        </script>
    {% endif %}
{% endblock report %}
